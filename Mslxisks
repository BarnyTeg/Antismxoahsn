local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Создание оружия
local tool = Instance.new("Tool")
tool.Name = "DeathGun"
tool.RequiresHandle = false
tool.Parent = LocalPlayer.Backpack

local shooting = false

local function shoot()
	while shooting do
		local target = Mouse.Target
		if target and target.Parent then
			local humanoid = target.Parent:FindFirstChildOfClass("Humanoid")
			local player = Players:GetPlayerFromCharacter(target.Parent)
			if humanoid and not player then
				humanoid.Health = 0
			elseif not humanoid then
				target:Destroy()
			end
		end
		task.wait(0.1)
	end
end

-- Активация стрельбы при тапе
tool.Equipped:Connect(function()
	UserInputService.TouchTap:Connect(function(touchPositions, processed)
		if processed then return end
		shooting = true
		shoot()
	end)

	UserInputService.TouchEnded:Connect(function()
		shooting = false
	end)
end)

tool.Unequipped:Connect(function()
	shooting = false
end)
