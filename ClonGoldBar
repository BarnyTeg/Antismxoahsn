local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- Находим оригинальный бандаж
local originalBandage = Workspace:WaitForChild("RuntimeItems"):WaitForChild("Bandage")

-- Функция создания копии с функционалом
local function createBandageCopy()
    if not originalBandage then
        warn("❗ Оригинальный бандаж не найден!")
        return nil
    end

    -- Создаем копию
    local copy = originalBandage:Clone()
    copy.Name = "Bandage_Copy_" .. os.time()
    
    -- Добавляем скрипт лечения
    local healScript = Instance.new("Script")
    healScript.Name = "HealScript"
    healScript.Source = [[
        local tool = script.Parent
        local handle = tool:WaitForChild("Handle")
        
        tool.Activated:Connect(function()
            local humanoid = tool.Parent:FindFirstChildOfClass("Humanoid")
            if humanoid then
                -- Лечение
                humanoid.Health = math.min(humanoid.Health + 30, humanoid.MaxHealth)
                
                -- Эффект использования
                for i = 1, 0, -0.1 do
                    handle.Transparency = i
                    task.wait(0.05)
                end
                tool:Destroy()
            end
        end)
    ]]
    healScript.Parent = copy
    
    return copy
end

-- Функция появления над игроком
local function spawnAbovePlayer()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
    local bandageCopy = createBandageCopy()
    if not bandageCopy then return end
    
    -- Позиционируем над головой
    bandageCopy:PivotTo(humanoidRootPart.CFrame * CFrame.new(0, 3, 0))
    bandageCopy.Parent = Workspace
    
    -- Делаем физически подбираемым
    bandageCopy:SetNetworkOwner(player)
    bandageCopy.Handle.CanCollide = true
    
    print("✅ Бандаж появился над игроком!")
end

-- Создаем кнопку для мобильных устройств
local function createMobileButton()
    local gui = Instance.new("ScreenGui")
    gui.Name = "BandageSpawnerUI"
    gui.Parent = player:WaitForChild("PlayerGui")
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.3, 0, 0.1, 0)
    button.Position = UDim2.new(0.7, 0, 0.8, 0)
    button.Text = "Создать бандаж"
    button.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Parent = gui
    
    button.MouseButton1Click:Connect(spawnAbovePlayer)
end

-- Инициализация
createMobileButton()
print("Готово! Нажмите кнопку для создания бандажа над собой.")
