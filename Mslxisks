local player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")

-- 1. –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
local function takeOverCharacter()
    local function processCharacter(char)
        if not char then return end
        
        -- –î–µ–ª–∞–µ–º –≤—Å–µ —á–∞—Å—Ç–∏ –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ –¥–ª—è —É—Ä–æ–Ω–∞
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.LocalTransparencyModifier = 0.5
                part.CanCollide = false
                part:SetAttribute("IsGhost", true)
            end
        end

        -- –°–æ–∑–¥–∞—ë–º —Ñ–µ–π–∫–æ–≤–æ–µ —Ç–µ–ª–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        local fakeBody = char:Clone()
        fakeBody.Name = "PlayerAvatar"
        fakeBody.Parent = workspace
        
        -- –ü–µ—Ä–µ–Ω–æ—Å–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        player.Character = fakeBody
        workspace.CurrentCamera.CameraSubject = fakeBody.Humanoid
        
        -- –§–∏–∫—Å–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —Ç–µ–ª–∞
        char.HumanoidRootPart.Anchored = true
        char.HumanoidRootPart.CFrame = CFrame.new(0, -1000, 0)
    end

    -- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    processCharacter(player.Character)
    player.CharacterAdded:Connect(processCharacter)
end

-- 2. –°–∏—Å—Ç–µ–º–∞ –≤–µ—á–Ω–æ–π –∂–∏–∑–Ω–∏
local function immortalitySystem()
    RunService.Heartbeat:Connect(function()
        pcall(function()
            -- –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–º–µ—Ä—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
                if player.Character.Humanoid.Health <= 0 then
                    player.Character.Humanoid.Health = 100
                    player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Running)
                end
            end
            
            -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—å, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –µ–≥–æ –∑–∞–±—Ä–∞—Ç—å
            if not player.Character or player.Character.Name ~= "PlayerAvatar" then
                takeOverCharacter()
            end
        end)
    end)
end

-- 3. –£–±–∏–π—Å—Ç–≤–æ NPC (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
local function npcEliminator()
    while task.wait(0.3) do
        pcall(function()
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local root = player.Character.HumanoidRootPart
                
                for _, npc in ipairs(workspace:GetDescendants()) do
                    if npc:IsA("Model") and npc:FindFirstChildOfClass("Humanoid") then
                        local npcRoot = npc:FindFirstChild("HumanoidRootPart")
                        if npcRoot and (npcRoot.Position - root.Position).Magnitude < 30 then
                            npc:Destroy()
                        end
                    end
                end
            end
        end)
    end
end

-- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º
takeOverCharacter()
immortalitySystem()
coroutine.wrap(npcEliminator)()

print("üíÄ –†–ï–ñ–ò–ú –ü–†–ò–ó–†–ê–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù | –°–µ—Ä–≤–µ—Ä —Å—á–∏—Ç–∞–µ—Ç –≤–∞—Å –º—ë—Ä—Ç–≤—ã–º, –Ω–æ –≤—ã –∂–∏–≤—ã")
