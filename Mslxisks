local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Функция для бессмертия + защита от сброса
local function makeImmortal(character)
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Настройка бессмертия
    humanoid.MaxHealth = math.huge
    humanoid.Health = math.huge
    
    -- Защита от принудительного изменения здоровья
    humanoid.GetPropertyChangedSignal("Health"):Connect(function()
        if humanoid.Health < humanoid.MaxHealth then
            humanoid.Health = humanoid.MaxHealth
        end
    end)
    
    -- Доп. защита, если игра использует .Destroy() или respawn
    if not character:FindFirstChild("ImmortalFlag") then
        local flag = Instance.new("BoolValue", character)
        flag.Name = "ImmortalFlag"
        flag.Value = true
    end
end

-- Автоприменение при спавне и респавне
player.CharacterAdded:Connect(makeImmortal)
if player.Character then
    makeImmortal(player.Character)
end
