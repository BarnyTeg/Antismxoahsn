local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- Поиск оригинала газеты
local function findOriginalNewspaper()
    -- Проверяем возможные пути
    local potentialPaths = {
        workspace:FindFirstChild("RuntimeItems"),
        workspace:FindFirstChild("Newspaper"),
        workspace:FindFirstChild("Part")
    }
    
    for _, location in ipairs(potentialPaths) do
        if location then
            for _, obj in ipairs(location:GetDescendants()) do
                if obj.Name == "Part" and obj:IsA("BasePart") and obj.Material == Enum.Material.Cardboard then
                    return obj
                end
            end
        end
    end
    return nil
end

-- Полное клонирование объекта со всеми потомками
local function deepCloneWithPhysics(original)
    if not original then return nil end
    
    -- 1. Создаем главную копию
    local clone = original:Clone()
    
    -- 2. Копируем все скрипты и соединения
    for _, descendant in ipairs(original:GetDescendants()) do
        if descendant:IsA("Script") or descendant:IsA("LocalScript") then
            local scriptClone = descendant:Clone()
            scriptClone.Parent = clone
            scriptClone.Enabled = true
        end
    end
    
    -- 3. Настраиваем физику
    clone.Anchored = false
    clone.CanCollide = true
    
    -- 4. Генерируем новый "ID" (через атрибут)
    clone:SetAttribute("UniqueId", "NP_"..tostring(math.random(10000,99999)))
    
    -- 5. Переносим в мир
    clone.Parent = original.Parent
    
    return clone
end

-- Основная функция
local function createFunctionalNewspaper()
    -- 1. Находим оригинал
    local original = findOriginalNewspaper()
    
    if not original then
        print("❌ Оригинальная газета не найдена!")
        return nil
    end
    
    -- 2. Создаем улучшенную копию
    local newspaperClone = deepCloneWithPhysics(original)
    
    -- 3. Размещаем перед игроком
    if player.Character then
        local humanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
        if humanoidRootPart then
            newspaperClone.Position = humanoidRootPart.Position + (humanoidRootPart.CFrame.LookVector * 3)
        end
    end
    
    print("✅ Создана функциональная копия газеты!")
    print("Новый ID:", newspaperClone:GetAttribute("UniqueId"))
    
    return newspaperClone
end

-- Запуск
createFunctionalNewspaper()
