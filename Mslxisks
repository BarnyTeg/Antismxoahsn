local player = game:GetService("Players").LocalPlayer
local replicated = game:GetService("ReplicatedStorage")
local storeItem = replicated.Remotes:FindFirstChild("StoreItem")
local pickUpTool = replicated.Remotes.Tool:FindFirstChild("PickUpTool")
local equipObject = replicated.Remotes.Object:FindFirstChild("EquipObject")

-- Поиск лопаты
local function findShovel()
    local shovel = player.Backpack:FindFirstChild("Shovel") or
                   (player.Character and player.Character:FindFirstChild("Shovel"))
    if shovel then
        print("Нашёл Shovel: " .. shovel.Name)
        return shovel
    end
    return nil
end

-- Вывод инвентаря
local function printInventory()
    print("Твой инвентарь:")
    for _, v in pairs(player.Backpack:GetChildren()) do
        print(v.Name)
    end
    if player.Character then
        for _, v in pairs(player.Character:GetChildren()) do
            if v:IsA("Tool") then print("В руках: " .. v.Name) end
        end
    end
end

-- Лёгкая заморозка сервера
local function freezeServer()
    local remotes = {
        replicated.Remotes:FindFirstChild("DropItem"),
        replicated.Remotes:FindFirstChild("StoreItem"),
        replicated.Remotes.Tool:FindFirstChild("PickUpTool"),
        replicated.Packages.RemotePromise.Remotes:FindFirstChild("S_InteractWithObject")
    }
    spawn(function()
        print("Лёгкая заморозка сервера — держись!")
        for i = 1, 300 do
            for _, remote in pairs(remotes) do
                if remote then
                    remote:FireServer(math.random(1, 1000), {}, nil, "spam")
                end
            end
            wait(0.001)
        end
        print("Заморозка закончена!")
    end)
end

-- Дюп через "обман" сервера
printInventory()
local shovel = findShovel()

if shovel and (storeItem or pickUpTool or equipObject) then
    print("Начинаю дюп Shovel через обман сервера!")
    freezeServer() -- Лёгкая заморозка
    
    for i = 1, 50 do
        -- Спамим RemoteEvent, чтобы сервер сам создал Shovel
        if storeItem then
            storeItem:FireServer("Shovel") -- Имя
            storeItem:FireServer({Name = "Shovel", Amount = 1}) -- Таблица
            storeItem:FireServer({ToolName = "Shovel", Player = player}) -- Фейковый запрос
        end
        if pickUpTool then
            pickUpTool:FireServer("Shovel")
            pickUpTool:FireServer({Name = "Shovel"})
        end
        if equipObject then
            equipObject:FireServer("Shovel")
            equipObject:FireServer({Name = "Shovel", Player = player})
        end
        wait(0.01)
    end
    
    -- Перезапуск через экипировку
    for _, tool in pairs(player.Backpack:GetChildren()) do
        tool.Parent = player.Character
        wait(0.01)
        tool.Parent = player.Backpack
    end
    print("Задюпал Shovel, чекни инвентарь — работают ли лопаты?")
else
    print("Shovel или RemoteEvent не нашёл! Возьми лопату!")
end

-- Проверка после
wait(1)
print("Твой инвентарь после дюпа:")
printInventory()
