-- Получаем сервисы
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

-- Получаем локального игрока
local player = Players.LocalPlayer

-- Функция для уведомлений
local function notify(title, message)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title,
        Text = message,
        Duration = 5
    })
end

-- Функция для дюпа бандажа
local function dupeBandage()
    -- Проверяем, есть ли персонаж
    if not player.Character then
        notify("Error", "You need a character to use this script!")
        return
    end

    -- Проверяем, есть ли инвентарь (Backpack)
    local backpack = player:FindFirstChildOfClass("Backpack")
    if not backpack then
        notify("Error", "No backpack found!")
        return
    end

    -- Ищем бандаж в инвентаре
    local bandage = nil
    for _, tool in pairs(backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.Name:lower() == "bandage" then -- Ищем предмет с именем "Bandage" (регистр не важен)
            bandage = tool
            break
        end
    end

    if not bandage then
        notify("Error", "No bandage found in your inventory!")
        return
    end

    -- Делаем бандаж сбрасываемым
    bandage.CanBeDropped = true

    -- Экипируем бандаж
    bandage.Parent = player.Character
    wait(0.1) -- Небольшая задержка для корректной обработки

    -- Сбрасываем бандаж в мир
    local droppedBandage = nil
    for _, tool in pairs(player.Character:GetChildren()) do
        if tool:IsA("Tool") and tool.Name:lower() == "bandage" then
            tool.Parent = Workspace
            droppedBandage = tool
            -- Позиционируем бандаж рядом с игроком
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root and tool:FindFirstChild("Handle") then
                tool.Handle.CFrame = root.CFrame + Vector3.new(0, 5, 0) -- Чуть выше игрока
            end
            break
        end
    end

    if not droppedBandage then
        notify("Error", "Failed to drop the bandage!")
        return
    end

    -- Уведомляем
    notify("Dupe Bandage", "Bandage dropped! Refreshing character...")

    -- Сбрасываем состояние персонажа без убийства
    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
    local root = player.Character:FindFirstChild("HumanoidRootPart")
    if humanoid and root then
        -- Сохраняем текущую позицию
        local originalCFrame = root.CFrame
        -- Перемещаем персонажа в "никуда" и обратно, чтобы обновить состояние
        root.CFrame = CFrame.new(Vector3.new(0, 10000, 0)) -- Временное перемещение
        wait(0.5)
        root.CFrame = originalCFrame -- Возвращаем на место
    end

    -- Уведомляем о следующем шаге
    wait(1)
    notify("Dupe Bandage", "Character refreshed! Try picking up the dropped bandage.")
end

-- Запускаем дюп
dupeBandage()
