local Players = game:GetService("Players")
local player = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- Настройки слитка (можно менять)
local SPAWN_INTERVAL = 5 -- Спавн каждые 5 секунд
local SPAWN_HEIGHT = 5 -- Высота над головой

-- Функция создания нового слитка (не клона, а нового MeshPart)
local function spawnGoldBar()
    local character = player.Character
    if not character then return end
    
    local head = character:FindFirstChild("Head")
    if not head then return end

    -- Создаём новый MeshPart (как оригинальный слиток)
    local newGoldBar = Instance.new("MeshPart")
    newGoldBar.Name = "Prop_GoldBar_" .. math.random(1, 10000)
    newGoldBar.Size = Vector3.new(2.667, 0.708, 1.120) -- Размер как у оригинала
    newGoldBar.Position = head.Position + Vector3.new(0, SPAWN_HEIGHT, 0) -- Над головой
    newGoldBar.Color = Color3.fromRGB(239, 184, 56) -- Золотой цвет (RGB 239, 184, 56)
    newGoldBar.Material = Enum.Material.Metal
    newGoldBar.CanCollide = true
    newGoldBar.Anchored = false
    newGoldBar.Parent = workspace

    -- Задаём меш и текстуру (если известны ID)
    -- newGoldBar.MeshId = "rbxassetid://..." -- Раскомментируй и вставь ID меша
    -- newGoldBar.TextureID = "rbxassetid://..." -- Раскомментируй и вставь ID текстуры

    -- Физика (чтобы падал)
    local bodyForce = Instance.new("BodyForce")
    bodyForce.Force = Vector3.new(0, newGoldBar:GetMass() * workspace.Gravity, 0)
    bodyForce.Parent = newGoldBar

    -- Эффект появления (необязательно)
    newGoldBar.Transparency = 1
    for i = 1, 20 do
        newGoldBar.Transparency = newGoldBar.Transparency - 0.05
        task.wait(0.03)
    end
end

-- Запускаем цикл спавна каждые 5 секунд
local spawnLoop
local function startSpawning()
    spawnLoop = RunService.Heartbeat:Connect(function()
        task.wait(SPAWN_INTERVAL)
        spawnGoldBar()
    end)
end

-- Если персонаж уже есть - запускаем сразу
if player.Character then
    startSpawning()
end

-- Если персонаж умер/переродился - перезапускаем
player.CharacterAdded:Connect(function()
    if spawnLoop then spawnLoop:Disconnect() end
    task.wait(1) -- Даём время на появление головы
    startSpawning()
end)
