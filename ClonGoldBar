local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local ServerStorage = game:GetService("ServerStorage")

-- Функция для вывода логов
local function log(message)
    print(message)
end

-- Функция для поиска бандажа
local function findBandage()
    -- Проверяем ReplicatedStorage
    log("[+] Проверка ReplicatedStorage:")
    for _, child in pairs(ReplicatedStorage:GetChildren()) do
        if child.Name == "Bandage" then
            log("   - Найден Bandage в ReplicatedStorage")
            return child
        end
        for _, subChild in pairs(child:GetChildren()) do
            if subChild.Name == "Bandage" then
                log("   - Найден Bandage в ReplicatedStorage." .. child.Name)
                return subChild
            end
        end
    end

    -- Проверяем Workspace
    log("[+] Проверка Workspace:")
    for _, child in pairs(Workspace:GetChildren()) do
        if child.Name == "Bandage" then
            log("   - Найден Bandage в Workspace")
            return child
        end
        for _, subChild in pairs(child:GetChildren()) do
            if subChild.Name == "Bandage" then
                log("   - Найден Bandage в Workspace." .. child.Name)
                return subChild
            end
        end
    end

    -- Проверяем ServerStorage
    log("[+] Проверка ServerStorage:")
    for _, child in pairs(ServerStorage:GetChildren()) do
        if child.Name == "Bandage" then
            log("   - Найден Bandage в ServerStorage")
            return child
        end
        for _, subChild in pairs(child:GetChildren()) do
            if subChild.Name == "Bandage" then
                log("   - Найден Bandage в ServerStorage." .. child.Name)
                return subChild
            end
        end
    end

    return nil
end

-- Основной код
local clonedBandage = findBandage()

if clonedBandage then
    -- Исследуем структуру оригинального бандажа
    log("[+] Исследование оригинального Bandage:")
    for _, child in pairs(clonedBandage:GetChildren()) do
        log(" - " .. child.Name .. " (" .. child.ClassName .. ")")
        if child:IsA("TextButton") or child:IsA("ImageButton") then
            log("   - Это кнопка!")
        end
        if child:IsA("LocalScript") or child:IsA("Script") then
            log("   - Это скрипт!")
        end
    end

    -- Клонируем бандаж
    local newBandage = clonedBandage:Clone()
    
    -- Проверяем, есть ли папка RuntimeItems, если нет — создаём
    local runtimeItems = Workspace:FindFirstChild("RuntimeItems")
    if not runtimeItems then
        runtimeItems = Instance.new("Folder")
        runtimeItems.Name = "RuntimeItems"
        runtimeItems.Parent = Workspace
    end
    
    newBandage.Parent = runtimeItems
    
    -- Проверяем наличие скриптов и кнопок в клоне
    log("[+] Исследование клонированного Bandage:")
    for _, child in pairs(newBandage:GetChildren()) do
        if child:IsA("LocalScript") or child:IsA("Script") then
            log("[+] Найден скрипт в клоне: " .. child.Name)
            -- Пытаемся перезапустить скрипт
            child.Disabled = true
            child.Disabled = false
            log("[+] Скрипт " .. child.Name .. " активирован")
        end
        if child:IsA("TextButton") or child:IsA("ImageButton") then
            log("[+] Найдена кнопка в клоне: " .. child.Name)
            -- Пробуем добавить базовую функцию, если скрипты не сработали
            child.MouseButton1Click:Connect(function()
                local player = game.Players.LocalPlayer
                if player then
                    log(player.Name .. " нажал на кнопку бандажа!")
                    -- Предполагаем, что бандаж лечит
                    local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
                    if humanoid and humanoid.Health < humanoid.MaxHealth then
                        humanoid.Health = math.min(humanoid.Health + 20, humanoid.MaxHealth)
                        log("Здоровье восстановлено на 20")
                    end
                    -- Удаляем бандаж после использования
                    newBandage:Destroy()
                    log("Бандаж удалён")
                end
            end)
        end
    end
    
    log("[+] Бандаж успешно скопирован в Workspace.RuntimeItems")
else
    log("[-] Бандаж не найден в игре")
end
