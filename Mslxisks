local Players = game:GetService("Players")
local player = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- Функция для отключения скриптов
local function disableScripts()
    print("Отключаю все ранее запущенные скрипты!")
    
    -- Отключаем LocalScript в PlayerScripts
    for _, script in pairs(player.PlayerScripts:GetDescendants()) do
        if script:IsA("LocalScript") or script:IsA("Script") then
            script.Disabled = true
            print("Отключил: " .. script.Name .. " (" .. script:GetFullName() .. ")")
        end
    end
    
    -- Отключаем LocalScript в PlayerGui
    for _, script in pairs(player.PlayerGui:GetDescendants()) do
        if script:IsA("LocalScript") or script:IsA("Script") then
            script.Disabled = true
            print("Отключил: " .. script.Name .. " (" .. script:GetFullName() .. ")")
        end
    end
    
    -- Отключаем LocalScript в Character
    if player.Character then
        for _, script in pairs(player.Character:GetDescendants()) do
            if script:IsA("LocalScript") or script:IsA("Script") then
                script.Disabled = true
                print("Отключил: " .. script.Name .. " (" .. script:GetFullName() .. ")")
            end
        end
    end
    
    -- Отключаем LocalScript в Workspace (на всякий случай)
    for _, script in pairs(workspace:GetDescendants()) do
        if script:IsA("LocalScript") or script:IsA("Script") then
            script.Disabled = true
            print("Отключил: " .. script.Name .. " (" .. script:GetFullName() .. ")")
        end
    end
end

-- Функция для отключения активных соединений
local function disconnectEvents()
    print("Отключаю активные соединения!")
    
    -- Перехватываем RunService (Heartbeat, RenderStepped и т.д.)
    local dummyConnection = RunService.Heartbeat:Connect(function() end)
    for i, connection in pairs(getconnections(RunService.Heartbeat)) do
        if connection ~= dummyConnection then
            connection:Disconnect()
            print("Отключил соединение Heartbeat #" .. i)
        end
    end
    dummyConnection:Disconnect()
    
    dummyConnection = RunService.RenderStepped:Connect(function() end)
    for i, connection in pairs(getconnections(RunService.RenderStepped)) do
        if connection ~= dummyConnection then
            connection:Disconnect()
            print("Отключил соединение RenderStepped #" .. i)
        end
    end
    dummyConnection:Disconnect()
end

-- Запускаем отключение
disableScripts()
disconnectEvents()
print("Все ранее запущенные скрипты и соединения отключены!")
