local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

-- Найти оригинальный бандаж
local originalBandage = Workspace:WaitForChild("RuntimeItems"):WaitForChild("Bandage")

-- Функция глубокого копирования
local function deepCopy(original)
    local copy = original:Clone()
    
    -- Генерируем уникальный ID для предотвращения конфликтов
    copy:SetAttribute("OriginalID", original:GetAttribute("OriginalID") or original:GetDebugId())
    copy.Name = "Bandage_Copy_" .. os.time()
    
    return copy
end

-- Система добавления в инвентарь
local function addToInventory()
    if not originalBandage then
        warn("❗ Оригинальный бандаж не найден!")
        return
    end

    -- Создаем улучшенную копию
    local bandageCopy = deepCopy(originalBandage)
    
    -- Настройка для инвентаря
    bandageCopy.PrimaryPart = bandageCopy:WaitForChild("Handle")
    bandageCopy:SetAttribute("IsCustomCopy", true)
    
    -- Добавляем функционал лечения
    local healScript = bandageCopy:FindFirstChild("HealScript") or Instance.new("Script")
    healScript.Name = "HealScript"
    healScript.Source = [[
        local tool = script.Parent
        local humanoid = tool.Parent:FindFirstChildOfClass("Humanoid")
        
        tool.Activated:Connect(function()
            if humanoid and humanoid.Health < humanoid.MaxHealth then
                humanoid.Health += 30
                -- Эффект использования
                tool.Handle.Transparency = 1
                task.wait(0.5)
                tool:Destroy()
            end
        end)
    ]]
    healScript.Parent = bandageCopy

    -- Добавление в инвентарь
    local backpack = player:FindFirstChild("Backpack")
    if backpack then
        bandageCopy.Parent = backpack
        print("✅ Бандаж успешно добавлен в инвентарь!")
    else
        warn("⚠️ Инвентарь не найден!")
    end
end

-- Мобильный интерфейс
local function createMobileUI()
    local gui = Instance.new("ScreenGui")
    local button = Instance.new("TextButton")
    
    gui.Name = "BandageSpawnerUI"
    gui.Parent = player:WaitForChild("PlayerGui")
    
    button.Size = UDim2.new(0.25, 0, 0.1, 0)
    button.Position = UDim2.new(0.75, 0, 0.85, 0)
    button.Text = "Получить бандаж"
    button.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Parent = gui
    
    button.MouseButton1Click:Connect(function()
        addToInventory()
    end)
end

-- Инициализация
createMobileUI()
print("Готово! Нажмите кнопку на экране для получения бандажа.")
